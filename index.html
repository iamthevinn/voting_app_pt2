<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Voting App Pt1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="node_modules/react/umd/react.development.js"></script>
  <script src="node_modules/react-dom/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>

<body>
    <div id='anchor'></div>
<script type="text/babel">

    class App extends React.Component {
      constructor(props) {
        super(props);
          this.state = {
            inputValue: "",
            votingBoxes: []
          }
        this.addVotingBox = this.addVotingBox.bind(this);
        this.captureInput = this.captureInput.bind(this);
      }

      addVotingBox() {
        let updatedVotingBoxList = this.state.votingBoxes;
        let key = this.state.votingBoxes.length;
        console.log(this.state.inputValue)
        updatedVotingBoxList.push(<VotingBox key={key} languageName={this.state.inputValue}/>)
        this.setState({votingBoxes: updatedVotingBoxList})
        //updatedVotingBoxList.sort(function(a, b){ return b.voteCount - a.voteCount })
        console.log(this.state.votingBoxes)
    }
    
    captureInput (e) {
        this.setState({inputValue: e.target.value})
    }

      render() {
        return (
          <div>
            <div>
                <label htmlFor="languageName">Enter a Language: </label>
                <input type="text" id="languageName" name="name" onBlur={this.captureInput}></input>
                <button onClick={this.addVotingBox}>Submit</button>
            </div>
            <br />
            <div>
              {this.state.votingBoxes}
            </div>
          </div>
        )
      }
    }



    class VotingBox extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          count: '0'
        }
        this.incrementCount = this.incrementCount.bind(this)
      }

      incrementCount() {
          this.setState({count: parseInt(this.state.count) + 1})
        }
 
      render() {

        const headerStyle = {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            fontFamily: 'sans-serif',
            fontSize: '48px'
          }
      
          const votingRectangleStyle = {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            fontFamily: 'sans-serif',
            fontSize: '30px',
            width: '300px',
            height: '80px',
            margin: '0 auto',
            border: '3px solid black',
            marginTop: '-3px'
          }
      
          const votingCountStyle = {
            width: '33%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
          }
      
          const libraryNameStyle = {
              width: '33%',
              textAlign: 'center'
            }
          
          const plusSignContainerStyle = {
              width: '33%',
              display: 'flex',
              justifyContent: 'center',
              alignItems: 'center'
              
          }
      
          const plusSign = {
              textAlign: 'center',
              fontWeight: 'bold',
              fontSize: '48px',
              color: 'green',
              display: 'inline',
              cursor: 'pointer'
            }
      
          const circleOutline = {
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                position: 'relative',
                width  : '50px',
                height : '50px',
                borderRadius: '50%',
                fontFamily: 'sans-serif',
                fontSize: '30px',
                border: '1px solid black'
            }
          
        return (
            <div style={votingRectangleStyle}>
              <div style={votingCountStyle}>
                <div style={circleOutline}>{this.state.count}</div>
              </div>
              <div style={libraryNameStyle}>{this.props.languageName}</div>
              <div style={plusSignContainerStyle}>
                <div style={plusSign} onClick={ this.incrementCount } >+</div>
              </div>
            </div>
          )
      }

    }

    ReactDOM.render(<App />,document.getElementById('anchor'))
  </script>
</body>

</html>